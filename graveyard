$(document).ready(function() {
  
  initMap();

  function initMap() {

    // var input = document.getElementById('start');
    // var autocomplete = new google.maps.places.Autocomplete(input);
      
    // google.maps.event.addDomListener(window, 'load', initialize);

    var input = document.getElementById('start');
    var mySLatLng = new google.maps.LatLng(input);

    var directionsDisplay = new google.maps.DirectionsRenderer;
    var directionsService = new google.maps.DirectionsService;
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 14,
      center: mySLatLng
    });
    directionsDisplay.setMap(map);

    calculateAndDisplayRoute(directionsService, directionsDisplay);
    document.getElementById('mode').addEventListener('change', function() {
      calculateAndDisplayRoute(directionsService, directionsDisplay);
    });
  }

  function calculateAndDisplayRoute(directionsService, directionsDisplay) {
    var mySLatLng = new google.maps.LatLng(40.708380459597200, -74.005633811976400); //start location
    var myELatLng = new google.maps.LatLng(40.750916, -73.975455); //end location
    var selectedMode = document.getElementById('mode').value;
    directionsService.route({
      origin: mySLatLng,
      destination: myELatLng, 
      travelMode: google.maps.TravelMode[selectedMode] //travel mode from drop down
    }, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      } else {
        window.alert('Directions request failed due to ' + status);
      }
    });
  }

  function initialize() {
    var input = document.getElementById('start');
    var autocomplete = new google.maps.places.Autocomplete(input);
   
    google.maps.event.addDomListener(window, 'load', initialize);
    
    var input2 = document.getElementById('endloc');
    var autocomplete2 = new google.maps.places.Autocomplete(input2);
  }
    google.maps.event.addDomListener(window, 'load', initialize);

});



<!--     <%= form_tag("/yelp", method: "get", remote: true) do %>
    <%= text_field_tag :start, nil, :placeholder => 'Where are they?' %><br><br>
    <%= text_field_tag :endloc, nil, :placeholder => 'Where are you?' %><br><br>
    <%= submit_tag "Where can we eat?", :id => 'submit_button' %> <%end %>
    <br> -->